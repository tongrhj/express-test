<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Jared Scoreboard API</title>
    <!-- Auth0Lock script -->
    <script src="//cdn.auth0.com/js/lock-7.12.min.js"></script>
    <script src="auth0-variables.js"></script>

    <!-- Setting the right viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  </head>
  <body style="background-color: coral;">

      <div style="margin: 0 auto;width: 300px;height:350px;background-color: white;text-align:center;display:flex;justify-content:center;align-items:center;">
        <input id="btn-login" class="btn-login" type="submit" style="font-size:100px;"/>
        <p>Welcome <span id="name"></span></p>
      </div>

      <!-- <div style="margin: 0 auto;width: 250px;height:400px;background-color: white;text-align:center;display:flex;justify-content:center;align-items:center;" id="scoreboard">
      </div> -->


      <script type="text/javascript">
        var lock = new Auth0Lock('LRPGy0n09P5sE8FbmWlUQhXRUCY2EI2H', 'tongrhj.auth0.com');
        // var lock = new Auth0Lock(
        //     // These properties are set in auth0-variables.js
        //     AUTH0_CLIENT_ID,
        //     AUTH0_DOMAIN
        // )

        var userProfile;

        document.querySelector('#btn-login').addEventListener('click', function() {
          lock.show(function(err, profile, token) {
            if (err) {
              // Error callback
              console.error("Something went wrong: ", err);
              alert("Something went wrong, check the Console errors");
            } else {
              // Success calback

              // Save the JWT token.
              localStorage.setItem('userToken', token);

              // Save the profile
              userProfile = profile;

              document.getElementById('name').textContent = profile.name;
            }
          });

        });

        // if (hash && hash.id_token) {
        //   //save the token in the session:
        //   localStorage.setItem('id_token', hash.id_token);
        // }
        //
        // var id_token = localStorage.getItem('id_token');
        // if (id_token) {
        //   lock.getProfile(id_token, function (err, profile) {
        //     if (err) {
        //       return alert('There was an error geting the profile: ' + err.message);
        //     }
        //     document.getElementById('name').textContent = profile.name;
        //   });
        // }

        // fetch('/scores', {
        //   headers: {
        //     'Authorization': 'Bearer ' + localStorage.getItem('id_token')
        //   },
        //   method: 'GET',
        //   cache: false
        // }).then((scores) => document.querySelector('#scoreboard').textContent = JSON.stringify(scores))

        // if (hash && hash.error) {
        //   alert('There was an error: ' + hash.error + '\n' + hash.error_description);
        // }
      </script>
  </body>
</html>
